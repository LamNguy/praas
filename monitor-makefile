all: praas-monitor-agent praas-monitor-agent.service
.PHONY: all praas-monitor-agent install uninstall
lib_dir=/usr/local/lib/praas
conf_dir=/usr/local/etc/praas
log_dir=/var/log/praas
service_dir=/etc/systemd/system

install: $(service_dir) praas-pat-agent.service

	echo Installing the service files...
	cp praas-monitor-agent.service $(service_dir)
	chown root:root $(service_dir)/praas-monitor-agent.service
	chmod 644 $(service_dir)/praas-monitor-agent.service

	echo Installing library files...
	mkdir -p $(lib_dir)
	cp monitor_service.py $(lib_dir)
	cp -R modules $(lib_dir)
	chown root:root $(lib_dir)/monitor_service.py
	chmod 644 $(lib_dir)/monitor_service.py
	
	


uninstall:
	-systemctl stop praas-monitor-agent
	-systemctl disable praas-monitor-agent
	-rm -r $(service_dir)/praas-monitor-agent.service
